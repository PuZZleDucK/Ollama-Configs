# ollama create config-qwen3-coder-30b -f qwen3-coder-30b.Modelfile
# ollama create bb-config-qwen3-coder-30b -f qwen3-coder-30b.Modelfile --system "$(cat optional_system_prompt.md)"
FROM qwen3-coder:30b
# I am Qwen, a large-scale language model independently developed by Alibaba Group
# Author: Alibaba
# Size on disk: 
# Size running: 43G -> half context: 30 GB
#  30B total parameters with only 3.3B activated
#  Long context support with 256K
#  architecture        qwen3moe    
#  parameters          30.5B       
#  context length      262144      
#  embedding length    2048        
#  quantization        Q4_K_M      

# roo:
#  creates agents but seems to have tool calling issues
#  only using cpu, but nvtop shows gpu usage
#  tool call fails on file writes
#  

PARAMETER num_ctx 123000
#  PARAMETER num_ctx 256000
PARAMETER repeat_penalty 1.05
PARAMETER stop "<|im_start|>"
PARAMETER stop "<|im_end|>"
PARAMETER stop "<|endoftext|>"
PARAMETER temperature 0.7
PARAMETER top_k 20
PARAMETER top_p 0.8

#  System:
#  {{- if .System }}<|im_start|>system
#  {{ .System }}<|im_end|>
#  {{ end }}
#  {{- range $i, $_ := .Messages }}
#  {{- $last := eq (len (slice $.Messages $i)) 1 -}}
#  {{- if eq .Role "user" }}<|im_start|>user
#  {{ .Content }}<|im_end|>
#  {{ else if eq .Role "assistant" }}<|im_start|>assistant
#  {{ .Content }}{{ if not $last }}<|im_end|>
#  {{ end }}
#  {{- end }}
#  {{- if and (ne .Role "assistant") $last }}<|im_start|>assistant
#  {{ end }}
#  {{- end }}
